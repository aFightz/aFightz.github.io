---
title: 08 | 类的卸载
date: 2019-10-31 23:32:04
tags: [JVM]
categories :
- 学习笔记
- JVM
- 深入理解JVM[课程]
---

#### <center><font color = "#36648B">✎</font><br/><font color = "#36648B">相关概念与定义</font></center>
当T类被加载、连接和初始化后，它的生命周期就开始了。当代表T类的Class对象不再被引用，即不可触及时，Class对象就会结束生命周期，T类**在方法区内的数据也会被卸载**，从而结束T类的生命周期。



#### <center><font color = "#36648B">✎✎</font><br/><font color = "#36648B">Class对象被引用的地方</font></center>
- 类加载器与它所加载的类是双向关联的关系。
- 一个类的实例总是会引用代表这个类的Class对象。
> **问题1**双向关联的话，不就一直都不会被垃圾回收了吗？

从上可知，要使一个class对象结束生命周期，它的**类加载器实例**与它的**对象实例**均要被垃圾回收。

由Java虚拟机自带的类加载器（根类加载器、扩展类加载器和系统类加载器）所加载的类，在虚拟机的生命周期中，**始终不会被卸载**。因为**Java虚拟机本身会始终引用这些类加载器**。

#### <center><font color = "#36648B">✎✎✎</font><br/><font color = "#36648B">观察类的卸载信息</font></center>
- 通过`jvisualvm`弹出可视化的窗口，在“监视”栏可看到类的卸载总数与加载总数。
- 使用`-XX:+TraceClassLoading`参数打印类的加载信息。