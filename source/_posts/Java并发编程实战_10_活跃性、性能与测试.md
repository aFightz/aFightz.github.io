---
title: 10 | 活跃性、性能与测试
date: 2020-01-19 17:03:37
tags: [并发]
categories :
- 学习笔记
- Java
- Java并发编程实战
---

数据库在检测到事务发生死锁时，将选择一个牺牲者并放弃这个事务。

如采所有线程以固定的顺序来获得锁，那么在程序中就不会出现锁顺序死锁问题。
 
顺序死锁的实现方式
synchronized(锁A){
   synchronized(锁B){
   }
}                    

> 尽量别再持有锁的时候调用加锁方法，容易造成死锁。

在JVM中Thread.yield（以及Thread.sleep(0)）的语义都是未定义的。JVM既可以将它们实现为空操作，也可以将它们视为线程调度的参考。
> 有些JVM实现yield方法的方式就是sleep(0)。     

UNIX系统中sleep(0)的语义：将当前线程放在与该优先级对应的运行队列末尾，并将执行权交给拥有相同优先级的其他线程。   


Amdahl 定律
加速比 <= 1 / (F + (1-F)/N )
加速比/CPU的数量=CPU的利用率
F为串行部分占的比重，N为CPU数量。
当N趋于无穷大时，加速比趋近于1/F。

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           