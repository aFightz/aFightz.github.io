---
title: 03 | 内存管理
date: 2019-08-23 17:21:24
tags: [操作系统]
categories :
- 学习笔记
- 操作系统
---

#### <center><font color = "#36648B">✎</font><br/><font color = "#36648B">CPU结构</font></center>
![](操作系统_03_内存管理\CPU结构.png)

**MMU（内存管理单元）**：负责处理CPU的内存访问请求。

#### <center><font color = "#36648B">✎✎</font><br/><font color = "#36648B">内存结构</font></center>
![](操作系统_03_内存管理\内存结构.png)


#### <center><font color = "#36648B">✎✎✎</font><br/><font color = "#36648B">地址空间与地址生成</font></center>
程序访问的地址空间是**逻辑地址空间**。逻辑地址空间需要由操作系统转换为**物理地址空间**（内存、硬盘）。

**1、地址空间的定义**
- 物理地址空间指的是硬件支持的地址空间。
- 逻辑地址空间是程序运行所拥有的内存范围。

**2、逻辑地址的生成**
逻辑地址是由程序经过**编译**后生成的。

**3、物理地址的访问**
- 首先操作系统生成逻辑地址与物理地址的映射。
- CPU中的计算逻辑单元（ALU）执行指令时，需要访问所传入的逻辑地址的内存内容。
- CPU中的内存管理单元MMU寻找此逻辑地址与物理地址的映射。（若找不到映射，则去内存中找，CPU再缓存此映射）
> 逻辑地址与物理地址的映射关系不仅存储在MMU，还存储在内存。（由上可知，内存的映射表比MMU的还要大）
- CPU中的控制器发送读取此物理地址内存内容的请求。
- 内存通过总线传送相应的内存内容给CPU。



**4、地址空间的独立访问**
这块不熟悉。

#### <center><font color = "#36648B">✎✎✎✎</font><br/><font color = "#36648B">内存碎片</font></center>
有两种内存碎片：
- 外部碎片：在分配单元间的未使用内存。
- 内部碎片：在分配单元内的未使用内存。
> 课程上都是为程序分配固定的内存。假设程序内部有逻辑会去存数据到内存中，这个内存要怎么再去分配呢？

