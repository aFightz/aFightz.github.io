---
title: 02 | 常量
date: 2019-10-22 12:33:17
tags: [JVM]
categories :
- 学习笔记
- JVM
- 深入理解JVM
---

#### <center><font color = "#36648B">✎</font><br/><font color = "#36648B">常量的本质含义</font></center>
常量在**编译阶段**会存入到**调用这个常量的方法所在的类的常量池**中，本质上，调用类并没有直接引用到定义常量的类，因此并**不会触发定义常量的类的初始化**。

**1、Demo**
```java
class Parent{
    public static final int parent = 1;

    static {
        System.out.println("parent");
    }
}
```

```java
public class Test{
    public static void main(String[] args) {
        /**由于将常量存放到了Test的常量池中，不触发Test的初始化。所以输出：
         * 1
         * 
         * 我们甚至可以在编译完之后将Parent.class文件删除也不会影响程序运行结果。
         */
        System.out.println(Parent.parent);
    }
}

```

#### <center><font color = "#36648B">✎</font><br/><font color = "#36648B">反编译与助记符</font></center>

**1、反编译命令**
```javap -c [.class path]```
> 反编译上面的Test.class文件，会发现Test的字节码文件中确实没有引用到到Parent，而是使用下述的助记符直接推常量。

**2、助记符**
- **ldc**：表示将int，float或是string类型的常量值从常量池中推送至栈顶。
- **sipush**：表示格一个短整型常量值（-32768~32767）推送至栈顶。
- **bipush**：表示将单字节（-128~127）的常量值推送至栈顶。
- **iconst_1**：表示将int类型1推送至栈顶（iconst_1~iconst_5）。

> double、char、byte类型呢？
是否是优先使用表示“小区间”的助记符，如果不符合再使用“大区间”的？