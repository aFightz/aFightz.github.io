---
title: 08 | 线程池的使用
date: 2019-01-19 12:23:59
tags: [并发]
categories :
- 学习笔记
- Java
- Java并发编程实战
---

在线程池的线程中不应该使用ThreadLocal在任务之间传递值。

在线程池中，如果任务依赖于其他任务，那么可能产生饥饿死锁。除非线程池足够大。

对于计算密集型的任务，在拥有N个处理器的系统上，当线程池的大小为N+1时，通常能实现最优的利用率。（即使当计算密集型的线程偶尔由于页缺失故障或者其他原因而暂停时，这个“额外”的线程也能确保CPU的时钟周期不会被浪费。）

线程数量 = CPU数量 * CPU利用率 * (1 + W/C)
W为线程等待时间，C为线程计算时间。
W+C即是一个线程任务实际运行时间。

int N_CPUS=Runtime.getRuntime().availableProcessors(); 